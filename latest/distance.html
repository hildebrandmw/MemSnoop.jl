<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Distance / WSS · MemSnoop.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>MemSnoop.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">MemSnoop</a></li><li><a class="toctext" href="proof-of-concept.html">Proof of Concept</a></li><li><span class="toctext">Analyses</span><ul><li><a class="toctext" href="trace.html">Full Trace</a></li><li class="current"><a class="toctext" href="distance.html">Distance / WSS</a><ul class="internal"><li><a class="toctext" href="#BucketStack-1">BucketStack</a></li></ul></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Analyses</li><li><a href="distance.html">Distance / WSS</a></li></ul><a class="edit-page" href="https://github.com/hildebrandmw/MemSnoop.jl/blob/master/docs/src/distance.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Distance / WSS</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Distance-/-WSS-1" href="#Distance-/-WSS-1">Distance / WSS</a></h1><p>To perform an analysis to estimate the Working Set Size (WSS) of an application, as well as the Memory Reuse Distance of pages, use the <a href="distance.html#MemSnoop.track_distance"><code>MemSnoop.track_distance</code></a> function.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MemSnoop.track_distance" href="#MemSnoop.track_distance"><code>MemSnoop.track_distance</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">track_distance(pid; [sampletime], [iter], [filter]) -&gt; DistanceTracker</code></pre><p>Return a <a href="distance.html#MemSnoop.DistanceTracker"><code>DistanceTracker</code></a> with memory usage statistics for the system process with <code>pid</code>. Like <a href="trace.html#MemSnoop.Trace"><code>Trace</code></a>, this function will gracefully exit when <code>pid</code> no longer exists.</p><p>The general flow of this function is as follows:</p><ol><li>Sleep for <code>sampletime</code>.</li><li>Pause <code>pid</code>.</li><li>Get the VMAs for <code>pid</code>, applying <code>filter</code>.</li><li>Read all of the active pages.</li><li>Mark all pages as idle.</li><li>Resume `pid.</li><li>Repeat for each element of <code>iter</code>.</li></ol><p><strong>Keyword Arguments</strong></p><ul><li><p><code>sampletime</code> : Time between reading and reseting the idle page flags to determine page   activity. Default: <code>2</code></p></li><li><p><code>iter</code> : Iterator to control the number of samples to take. Default behavior is to keep   sampling until monitored process terminates. Default: <a href="@ref"><code>Forever()</code></a></p></li><li><p><code>filter</code> : Filter to apply to process <code>VMAs</code> to reduce total amount of memory tracked.   Default: <a href="@ref"><code>tautology</code></a></p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/MemSnoop.jl/blob/fc130fb6f88e97924080492795bc9be161b83789/src/analysis/distance.jl#L155-L182">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MemSnoop.DistanceTracker" href="#MemSnoop.DistanceTracker"><code>MemSnoop.DistanceTracker</code></a> — <span class="docstring-category">Type</span>.</div><div><div><p>Struct tracking various page use metrics for an application without keeping a whole trace of page activity.</p><p><strong>Fields</strong></p><ul><li><p><code>distances::Dict{Int,Int}</code> - Reuse distance count. Keys to the dictionary are (an upper    bound on) the number of unique pages accessed between subsequent accesses to an    individual page. Values of the dictionary are the count of that distance.</p><p>The distances (keys) are an upper bound because of the discrete sampletime.</p></li><li><p><code>resident_pages::Vector{Int}</code> - The number of resident pages. Accessing <code>resident_pages[i]</code>   gives the number of resident pages for sample window <code>i</code>.</p></li><li><p><code>active_pages::Vector{Int}</code> - The number of active pages.</p></li><li><p><code>vma_size::Vector{Int}</code> - Collective size of all the monitored VMA regions.</p></li><li><p><code>max_depth::Vector{Int}</code> - The maximum depth seen for a sample.</p></li></ul></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaLang/julia/blob/0d713926f85dfa3e4e0962215b909b8e47e94f48/base/#L0-L21">source</a></section><h2><a class="nav-anchor" id="BucketStack-1" href="#BucketStack-1">BucketStack</a></h2><p>A custom <a href="distance.html#MemSnoop.BucketStack"><code>MemSnoop.BucketStack</code></a> type is used to perform the stack analysis to estimate page Reuse Distance.</p><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MemSnoop.BucketStack" href="#MemSnoop.BucketStack"><code>MemSnoop.BucketStack</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">BucketStack{T}</code></pre><p>Like a stack, but entries in the stack are buckets of elements rather than single elements. This models the fact that we sample active pages over an interval and don&#39;t have an exact trace.</p><p><strong>Fields</strong></p><ul><li><code>buckets::Vector{Set{T}}</code></li></ul><p><strong>Constructor</strong></p><pre><code class="language-none">BucketStack{T}()</code></pre><p>Construct an empty <code>BucketStack</code> with element types <code>T</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/MemSnoop.jl/blob/fc130fb6f88e97924080492795bc9be161b83789/src/analysis/distance.jl#L4-L21">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MemSnoop.upstack!" href="#MemSnoop.upstack!"><code>MemSnoop.upstack!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">upstack!(stack::BucketStack, item) -&gt; Int</code></pre><p>Add <code>item</code> to the first bucket of <code>stack</code>. Delete <code>item</code> from lower buckets in the stack and return the depth of the item. If <code>item</code> was not previously found in  <code>stack</code>, return <code>-1</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/hildebrandmw/MemSnoop.jl/blob/fc130fb6f88e97924080492795bc9be161b83789/src/analysis/distance.jl#L47-L53">source</a></section><footer><hr/><a class="previous" href="trace.html"><span class="direction">Previous</span><span class="title">Full Trace</span></a></footer></article></body></html>

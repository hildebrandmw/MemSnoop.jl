<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Thoughts · MemSnoop.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>MemSnoop.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">MemSnoop</a></li><li><a class="toctext" href="proof-of-concept.html">Proof of Concept</a></li><li><a class="toctext" href="trace.html">Generating Traces</a></li><li><span class="toctext">Implementation</span><ul><li><a class="toctext" href="vma.html">VMAs</a></li></ul></li><li class="current"><a class="toctext" href="thoughts.html">Thoughts</a><ul class="internal"><li><a class="toctext" href="#A-pathological-example-1">A pathological example</a></li><li><a class="toctext" href="#Error-Terms-1">Error Terms</a></li><li><a class="toctext" href="#Idea-1">Idea</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="thoughts.html">Thoughts</a></li></ul><a class="edit-page" href="https://github.com/hildebrandmw/MemSnoop.jl/blob/master/docs/src/thoughts.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Thoughts</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Thoughts-1" href="#Thoughts-1">Thoughts</a></h1><p><strong>DISCLAIMER</strong>: This is me basically sketching some ideas I had so I can put them in a more coherent form later. This is not meant yet to be understandable by others. Proceed with  caution :D</p><p>Originally, I had thought that sampling at a smaller time interval would yield strictly better results, but I&#39;m not so sure anymore. Here is an outline of my though process so far.</p><p><strong>Definition</strong>: Let <span>$t: \mathbb{N} \to \mathbb{R}^+$</span> be a <em>time sequence</em> if <span>$t_0 &gt; 0$</span>  and <span>$t_{i+1} &gt; t_{i}$</span>.</p><p><strong>Definition</strong>: Define a <em>sample</em> <span>$S$</span> as</p><div>\[S_{t_i} = \{ k | \text{Page $k$ was active between $t_{i-1}$ and $t_{i}$} \}\]</div><p>be the set of pages of active pages on the time interval <span>$(t_{i-1}, t_{i}]$</span> where <span>$t$</span> is a time sequence. As a syntactical choice, let <span>$S(t, 0) = \emptyset$</span>.</p><p><strong>Definition</strong> Define a <em>trace</em> <span>$T = (S_{t_0}, S_{t_1}, \ldots S_{t_n})$</span> be an ordered collection of samples.</p><p>What we would <em>like</em> to show is that if we have two time sequences <span>$t$</span> and <span>$t^{\prime}$</span> where <span>$t_{i+1} - t_i \leq t^{\prime} _{j+1} - t^{\prime} _{j}$</span> for all index pairs <span>$i$</span> and <span>$j$</span>, (in other words, time sequence <span>$t$</span> has a smaller time interval than <span>$t^{\prime}$</span>, then <span>$t$</span> is somehow a better approximation of the ground truth of reuse distance. To do  this, we need to define what we mean by reuse distance in the sense of discrete samples.</p><p>Let <span>$t_0$</span> and <span>$t_1$</span> denote the times between subsequent accesses to some page <span>$k$</span>.  Furthermore, suppose the time sequence <span>$t$</span> denoting our samples times is such that for some index <span>$i$</span>, <span>$t_{i-1} &lt; t_0 \leq t_i$</span> and <span>$t_{i+1} &lt; t_1 \leq t_{i+2}$</span>. That is, the  sampling periods look something like what we have below:</p><p><img src="assets/thoughts_1.png" alt/></p><p>We have to be conservative and say that the reuse distance for page <code>k</code> at this time interval is</p><div>\[d(t, i+2, k) = \left| S_{t_i} \cup S_{t_{i+1}} \cup S_{t_{i+2}} \setminus {k} \right|\]</div><p>Now, we assume that page <span>$k$</span> is not accessed during <span>$S_{t_{i+`}}$</span>. One source of error comes from over counting unique accesses on either side of the samples containing the page of interest.</p><p>If subsequent accesses to page <span>$k$</span> are recorded in <span>$S_{t_i}$</span> and <span>$S_{t_j}$</span>, then a bound on the error in the reuse distance calculation is</p><div>\[E = | S_{t_i} \cup S_{t_j} \setminus {k} | = | S_{t_i} \cup S_{t_j} | - 1\]</div><p>(Side note for further clarification, this works if we think of an oracle sampling function <span>$t^*$</span> where <span>$|S_{t^* _i}| = 1$</span> for all valid <span>$i$</span>. I.E., a perfect trace).</p><p>This is not taking into acount sub-sampling-frame rehits. </p><h2><a class="nav-anchor" id="A-pathological-example-1" href="#A-pathological-example-1">A pathological example</a></h2><p>Consider the following pathological example:</p><p><img src="assets/error.png" alt/></p><p>Here, we have two sampling periods, with the exact sequence of page hits shown by the  vertical bars. The exact trace histogram is shown on the left, with the one generated by the approximation shown on the right. The dashed bar is the approximated histogram is all  subpage accesses are recorded.</p><h2><a class="nav-anchor" id="Error-Terms-1" href="#Error-Terms-1">Error Terms</a></h2><p>Let <span>$t_i$</span> and <span>$t_j$</span> be sample times for subsequent accesses to page <span>$k$</span>. If we use the pessimistic distance formula, than the error in the reuse distance is</p><div>\[| S_{t_i} \cup S_{t_j} | - 1\]</div><p>Let <code>r_{t_i}</code> be the number of repeated accesses in <code>S_{t_i}</code>. Then the error here is</p><div>\[r_{t_i} (|S_{t_i}| - 1)\]</div><h2><a class="nav-anchor" id="Idea-1" href="#Idea-1">Idea</a></h2><p>We can actually generate a lower bound AND an upper bound for reuse distance via sampling.</p><footer><hr/><a class="previous" href="vma.html"><span class="direction">Previous</span><span class="title">VMAs</span></a></footer></article></body></html>
